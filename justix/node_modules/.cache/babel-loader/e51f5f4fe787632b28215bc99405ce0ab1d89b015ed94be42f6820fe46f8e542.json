{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link,useParams}from'react-router-dom';import ContainerHome from'../../ContainerHome/index';import styles from'../../../pages/Login/Login.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdvocaciaListFeed=()=>{const{id_advocacia}=useParams();const[comments,setComments]=useState([]);const[averageRating,setAverageRating]=useState(0);useEffect(()=>{if(id_advocacia){fetchComments();fetchAverageRating();}},[id_advocacia]);const fetchComments=async()=>{try{const res=await axios.get(`http://localhost:3001/av_advocacia/${id_advocacia}`);setComments(res.data);}catch(error){console.error('Erro ao buscar comentários:',error);}};const fetchAverageRating=async()=>{try{const res=await axios.get(`http://localhost:3001/advocacia_avaliacao/${id_advocacia}`);setAverageRating(res.data.media_avaliacao||0);}catch(error){console.error('Erro ao calcular média de avaliações:',error);}};return/*#__PURE__*/_jsx(ContainerHome,{children:/*#__PURE__*/_jsxs(\"div\",{children:[id_advocacia&&/*#__PURE__*/_jsx(Link,{to:`/user/dashboard/advocacia/${id_advocacia}/feedback/add`,className:styles.feedbtn,children:\"Realizar seu Feedback?\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.feedtxt,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"M\\xE9dia: \\u2605 \",averageRating]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Coment\\xE1rios\"})]}),comments.length>0?comments.map((comment,index)=>/*#__PURE__*/_jsx(\"section\",{className:styles.CSection,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.commentContainer,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:comment.nome}),\" Anonimous\",comment.id_usuario,\" - \\u2605 \",comment.avaliacao]}),/*#__PURE__*/_jsx(\"div\",{className:styles.commentarea,children:/*#__PURE__*/_jsx(\"p\",{children:comment.comentario})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Data: \",new Date(comment.data_criacao).toLocaleDateString()]})]},index)})):/*#__PURE__*/_jsx(\"p\",{children:\"Ainda sem coment\\xE1rios.\"})]})});};export default AdvocaciaListFeed;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useParams","ContainerHome","styles","jsx","_jsx","jsxs","_jsxs","AdvocaciaListFeed","id_advocacia","comments","setComments","averageRating","setAverageRating","fetchComments","fetchAverageRating","res","get","data","error","console","media_avaliacao","children","to","className","feedbtn","feedtxt","length","map","comment","index","CSection","commentContainer","nome","id_usuario","avaliacao","commentarea","comentario","Date","data_criacao","toLocaleDateString"],"sources":["C:/Users/vinic/OneDrive/Área de Trabalho/React project/justix/src/components/BDPages/Feedbacks/AdvocaciaListFeed.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport ContainerHome from '../../ContainerHome/index';\r\nimport styles from '../../../pages/Login/Login.module.css'\r\n\r\nconst AdvocaciaListFeed = () => {\r\n    const { id_advocacia } = useParams();\r\n    const [comments, setComments] = useState([]);\r\n    const [averageRating, setAverageRating] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (id_advocacia) {\r\n            fetchComments();\r\n            fetchAverageRating();\r\n        }\r\n    }, [id_advocacia]);\r\n\r\n    const fetchComments = async () => {\r\n        try {\r\n            const res = await axios.get(`http://localhost:3001/av_advocacia/${id_advocacia}`);\r\n            setComments(res.data);\r\n        } catch (error) {\r\n            console.error('Erro ao buscar comentários:', error);\r\n        }\r\n    };\r\n\r\n    const fetchAverageRating = async () => {\r\n        try {\r\n            const res = await axios.get(`http://localhost:3001/advocacia_avaliacao/${id_advocacia}`);\r\n            setAverageRating(res.data.media_avaliacao || 0);\r\n        } catch (error) {\r\n            console.error('Erro ao calcular média de avaliações:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ContainerHome>\r\n            <div>\r\n                {id_advocacia && (\r\n                    <Link to={`/user/dashboard/advocacia/${id_advocacia}/feedback/add`} className={styles.feedbtn}>\r\n                        Realizar seu Feedback?\r\n                    </Link>\r\n                )}\r\n                <div className={styles.feedtxt}>\r\n                <h3>Média: ★ {averageRating}</h3>\r\n                <h4>Comentários</h4>\r\n                </div>\r\n                {comments.length > 0 ? (\r\n                    comments.map((comment, index) => (\r\n                        <section className={styles.CSection}>\r\n                        <div key={index} className={styles.commentContainer}>\r\n                            <p>\r\n                                <strong>{comment.nome}</strong> Anonimous{comment.id_usuario} - \r\n                                 ★ {comment.avaliacao}\r\n                            </p>\r\n                            <div className={styles.commentarea}>\r\n                            <p>{comment.comentario}</p>\r\n                            </div>\r\n                            <p>Data: {new Date(comment.data_criacao).toLocaleDateString()}</p>\r\n                        </div>\r\n                        </section>\r\n                    ))\r\n                ) : (\r\n                    <p>Ainda sem comentários.</p>\r\n                )}\r\n            </div>\r\n        </ContainerHome>\r\n    );\r\n};\r\n\r\nexport default AdvocaciaListFeed;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}