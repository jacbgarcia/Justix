{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import axios from'axios';import styles from'../../pages/Login/Login.module.css';import ContainerHome from'../ContainerHome';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForunsFormPageO=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const forumAtivo=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.forum)||null;const[formData,setFormData]=useState({nome:'',cidade:'',estado:'',endereco:'',cep:'',avaliacao_media:0});const[imagemFile,setImagemFile]=useState(null);const[previewUrl,setPreviewUrl]=useState(null);useEffect(()=>{if(forumAtivo){setFormData(forumAtivo);if(forumAtivo.imagem){setPreviewUrl(`http://localhost:3001/uploads/${forumAtivo.imagem}`);}}},[forumAtivo]);const handleImagemChange=e=>{const file=e.target.files[0];if(file){setImagemFile(file);const fileUrl=URL.createObjectURL(file);setPreviewUrl(fileUrl);}};const handleSubmit=async e=>{e.preventDefault();try{const submitFormData=new FormData();// Adiciona todos os campos do formulário ao FormData\nObject.keys(formData).forEach(key=>{submitFormData.append(key,formData[key]);});// Adiciona a imagem apenas se uma nova imagem foi selecionada\nif(imagemFile){submitFormData.append('imagem',imagemFile);}if(forumAtivo){await axios.put(`http://localhost:3001/foruns/${forumAtivo.id_forum}`,submitFormData,{headers:{'Content-Type':'multipart/form-data'}});}else{await axios.post('http://localhost:3001/foruns',submitFormData,{headers:{'Content-Type':'multipart/form-data'}});}navigate('/admin/dashboard/foruns');}catch(err){console.error('Erro ao salvar fórum:',err);}};const handleCancel=()=>{navigate('/admin/dashboard/foruns');};return/*#__PURE__*/_jsx(ContainerHome,{children:/*#__PURE__*/_jsx(\"section\",{className:styles.loginSection,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.loginContainer,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:forumAtivo?'Editar Fórum':'Novo Fórum'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.loginForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nome:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nome,onChange:e=>setFormData({...formData,nome:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cidade:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.cidade,onChange:e=>setFormData({...formData,cidade:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Estado:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.estado,onChange:e=>setFormData({...formData,estado:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"di\",{className:styles.formGroup,v:true,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Endere\\xE7o:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.endereco,onChange:e=>setFormData({...formData,endereco:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"CEP:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.cep,onChange:e=>setFormData({...formData,cep:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Foto:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImagemChange}),previewUrl&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Preview\",style:{maxWidth:'200px',marginTop:'10px'}})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.submitButton,children:forumAtivo?'Salvar Alterações':'Criar Fórum'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:styles.submitButton,children:\"Cancelar\"})]})]})})});};export default ForunsFormPageO;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","axios","styles","ContainerHome","jsx","_jsx","jsxs","_jsxs","ForunsFormPageO","_location$state","navigate","location","forumAtivo","state","forum","formData","setFormData","nome","cidade","estado","endereco","cep","avaliacao_media","imagemFile","setImagemFile","previewUrl","setPreviewUrl","imagem","handleImagemChange","e","file","target","files","fileUrl","URL","createObjectURL","handleSubmit","preventDefault","submitFormData","FormData","Object","keys","forEach","key","append","put","id_forum","headers","post","err","console","error","handleCancel","children","className","loginSection","loginContainer","title","onSubmit","loginForm","formGroup","type","value","onChange","required","v","accept","src","alt","style","maxWidth","marginTop","submitButton","onClick"],"sources":["C:/Users/vinic/OneDrive/Área de Trabalho/React project/justix/src/components/BD/ForunsFormPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport styles from '../../pages/Login/Login.module.css';\r\nimport ContainerHome from '../ContainerHome';\r\n\r\nconst ForunsFormPageO = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const forumAtivo = location.state?.forum || null;\r\n\r\n  const [formData, setFormData] = useState({\r\n    nome: '',\r\n    cidade: '',\r\n    estado: '',\r\n    endereco: '',\r\n    cep: '',\r\n    avaliacao_media: 0\r\n  });\r\n\r\n  const [imagemFile, setImagemFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (forumAtivo) {\r\n      setFormData(forumAtivo);\r\n      if (forumAtivo.imagem) {\r\n        setPreviewUrl(`http://localhost:3001/uploads/${forumAtivo.imagem}`);\r\n      }\r\n    }\r\n  }, [forumAtivo]);\r\n\r\n  const handleImagemChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImagemFile(file);\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setPreviewUrl(fileUrl);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const submitFormData = new FormData();\r\n      \r\n      // Adiciona todos os campos do formulário ao FormData\r\n      Object.keys(formData).forEach(key => {\r\n        submitFormData.append(key, formData[key]);\r\n      });\r\n\r\n      // Adiciona a imagem apenas se uma nova imagem foi selecionada\r\n      if (imagemFile) {\r\n        submitFormData.append('imagem', imagemFile);\r\n      }\r\n\r\n      if (forumAtivo) {\r\n        await axios.put(\r\n          `http://localhost:3001/foruns/${forumAtivo.id_forum}`,\r\n          submitFormData,\r\n          {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }\r\n        );\r\n      } else {\r\n        await axios.post(\r\n          'http://localhost:3001/foruns',\r\n          submitFormData,\r\n          {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }\r\n        );\r\n      }\r\n      navigate('/admin/dashboard/foruns');\r\n    } catch (err) {\r\n      console.error('Erro ao salvar fórum:', err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    navigate('/admin/dashboard/foruns');\r\n  };\r\n\r\n  return (\r\n    <ContainerHome>\r\n      <section className={styles.loginSection}>\r\n    <div className={styles.loginContainer}>\r\n      <h3 className={styles.title}>{forumAtivo ? 'Editar Fórum' : 'Novo Fórum'}</h3>\r\n      <form onSubmit={handleSubmit} className={styles.loginForm}>\r\n        <div className={styles.formGroup}>\r\n          <label>Nome:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.nome}\r\n            onChange={(e) => setFormData({ ...formData, nome: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Cidade:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.cidade}\r\n            onChange={(e) => setFormData({ ...formData, cidade: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Estado:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.estado}\r\n            onChange={(e) => setFormData({ ...formData, estado: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <di className={styles.formGroup}v>\r\n          <label>Endereço:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.endereco}\r\n            onChange={(e) => setFormData({ ...formData, endereco: e.target.value })}\r\n          />\r\n        </di>\r\n        <div className={styles.formGroup}>\r\n          <label>CEP:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.cep}\r\n            onChange={(e) => setFormData({ ...formData, cep: e.target.value })}\r\n          />\r\n        </div>\r\n\r\n        <div className={styles.formGroup}>\r\n          <label>Foto:</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleImagemChange}\r\n          />\r\n          {previewUrl && (\r\n            <div>\r\n              <img \r\n                src={previewUrl} \r\n                alt=\"Preview\" \r\n                style={{ maxWidth: '200px', marginTop: '10px' }}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button type=\"submit\" className={styles.submitButton}>\r\n          {forumAtivo ? 'Salvar Alterações' : 'Criar Fórum'}\r\n        </button>\r\n        <button type=\"button\" onClick={handleCancel} className={styles.submitButton}>\r\n          Cancelar\r\n        </button>\r\n      </form>\r\n    </div>\r\n    </section>\r\n    </ContainerHome>\r\n  );\r\n};\r\n\r\nexport default ForunsFormPageO;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}