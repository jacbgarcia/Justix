{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import axios from'axios';import styles from'../../pages/Login/Login.module.css';import ContainerHome from'../ContainerHome';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MediacoesFormPageO=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const mediadorAtivo=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.mediador)||null;const[formData,setFormData]=useState({nome:'',estado:'',avaliacao_media:0});const[imagemFile,setImagemFile]=useState(null);const[previewUrl,setPreviewUrl]=useState(null);useEffect(()=>{if(mediadorAtivo){setFormData(mediadorAtivo);if(mediadorAtivo.imagem){setPreviewUrl(`http://localhost:3001/uploads/mediador/${mediadorAtivo.imagem}`);}}},[mediadorAtivo]);const handleImagemChange=e=>{const file=e.target.files[0];if(file){setImagemFile(file);const fileUrl=URL.createObjectURL(file);setPreviewUrl(fileUrl);}};const handleSubmit=async e=>{e.preventDefault();try{const submitFormData=new FormData();// Adiciona todos os campos do formulário ao FormData\nObject.keys(formData).forEach(key=>{submitFormData.append(key,formData[key]);});// Adiciona a imagem apenas se uma nova imagem foi selecionada\nif(imagemFile){submitFormData.append('imagem',imagemFile);}if(mediadorAtivo){await axios.put(`http://localhost:3001/mediador/${mediadorAtivo.id_mediador}`,submitFormData,{headers:{'Content-Type':'multipart/form-data'}});}else{await axios.post('http://localhost:3001/mediador',submitFormData,{headers:{'Content-Type':'multipart/form-data'}});}navigate('/admin/dashboard/mediador');}catch(err){console.error('Erro ao salvar mediador:',err);}};const handleCancel=()=>{navigate('/admin/dashboard/mediador');};return/*#__PURE__*/_jsx(ContainerHome,{children:/*#__PURE__*/_jsx(\"section\",{className:styles.loginSection,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.loginContainer,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:mediadorAtivo?'Editar Mediador':'Novo Mediador'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.loginForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nome:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nome,onChange:e=>setFormData({...formData,nome:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Estado:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.estado,onChange:e=>setFormData({...formData,estado:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Foto:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImagemChange}),previewUrl&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Preview\",style:{maxWidth:'200px',marginTop:'10px'}})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.submitButton,children:mediadorAtivo?'Salvar Alterações':'Criar Mediador'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:styles.submitButton,children:\"Cancelar\"})]})]})})});};export default MediacoesFormPageO;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","axios","styles","ContainerHome","jsx","_jsx","jsxs","_jsxs","MediacoesFormPageO","_location$state","navigate","location","mediadorAtivo","state","mediador","formData","setFormData","nome","estado","avaliacao_media","imagemFile","setImagemFile","previewUrl","setPreviewUrl","imagem","handleImagemChange","e","file","target","files","fileUrl","URL","createObjectURL","handleSubmit","preventDefault","submitFormData","FormData","Object","keys","forEach","key","append","put","id_mediador","headers","post","err","console","error","handleCancel","children","className","loginSection","loginContainer","title","onSubmit","loginForm","formGroup","type","value","onChange","required","accept","src","alt","style","maxWidth","marginTop","submitButton","onClick"],"sources":["C:/Users/vinic/OneDrive/Área de Trabalho/React project/justix/src/components/BD/MediacoesFormPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport styles from '../../pages/Login/Login.module.css';\r\nimport ContainerHome from '../ContainerHome';\r\n\r\n\r\nconst MediacoesFormPageO = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const mediadorAtivo = location.state?.mediador || null;\r\n\r\n  const [formData, setFormData] = useState({\r\n    nome: '',\r\n    estado: '',\r\n    avaliacao_media: 0\r\n  });\r\n\r\n  const [imagemFile, setImagemFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (mediadorAtivo) {\r\n      setFormData(mediadorAtivo);\r\n      if (mediadorAtivo.imagem) {\r\n        setPreviewUrl(`http://localhost:3001/uploads/mediador/${mediadorAtivo.imagem}`);\r\n      }\r\n    }\r\n  }, [mediadorAtivo]);\r\n\r\n  const handleImagemChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImagemFile(file);\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setPreviewUrl(fileUrl);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const submitFormData = new FormData();\r\n      \r\n      // Adiciona todos os campos do formulário ao FormData\r\n      Object.keys(formData).forEach(key => {\r\n        submitFormData.append(key, formData[key]);\r\n      });\r\n\r\n      // Adiciona a imagem apenas se uma nova imagem foi selecionada\r\n      if (imagemFile) {\r\n        submitFormData.append('imagem', imagemFile);\r\n      }\r\n\r\n      if (mediadorAtivo) {\r\n        await axios.put(\r\n          `http://localhost:3001/mediador/${mediadorAtivo.id_mediador}`,\r\n          submitFormData,\r\n          {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }\r\n        );\r\n      } else {\r\n        await axios.post(\r\n          'http://localhost:3001/mediador',\r\n          submitFormData,\r\n          {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }\r\n        );\r\n      }\r\n      navigate('/admin/dashboard/mediador');\r\n    } catch (err) {\r\n      console.error('Erro ao salvar mediador:', err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    navigate('/admin/dashboard/mediador');\r\n  };\r\n\r\n  return (\r\n    <ContainerHome>\r\n      <section className={styles.loginSection}>\r\n    <div className={styles.loginContainer}>\r\n      <h3 className={styles.title}>{mediadorAtivo ? 'Editar Mediador' : 'Novo Mediador'}</h3>\r\n      <form onSubmit={handleSubmit} className={styles.loginForm}>\r\n        <div className={styles.formGroup}>\r\n          <label>Nome:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.nome}\r\n            onChange={(e) => setFormData({ ...formData, nome: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Estado:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.estado}\r\n            onChange={(e) => setFormData({ ...formData, estado: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Foto:</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleImagemChange}\r\n          />\r\n          {previewUrl && (\r\n            <div>\r\n              <img \r\n                src={previewUrl} \r\n                alt=\"Preview\" \r\n                style={{ maxWidth: '200px', marginTop: '10px' }}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button type=\"submit\" className={styles.submitButton}>\r\n          {mediadorAtivo ? 'Salvar Alterações' : 'Criar Mediador'}\r\n        </button>\r\n        <button type=\"button\" onClick={handleCancel} className={styles.submitButton}>\r\n          Cancelar\r\n        </button>\r\n      </form>\r\n    </div>\r\n    </section>\r\n    </ContainerHome>\r\n  );\r\n};\r\n\r\nexport default MediacoesFormPageO;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}