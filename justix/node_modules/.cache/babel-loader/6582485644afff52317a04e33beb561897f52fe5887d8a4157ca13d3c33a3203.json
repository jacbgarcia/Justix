{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import axios from'axios';import styles from'../../pages/Login/Login.module.css';import ContainerHome from'../ContainerHome';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudienciasFormPageO=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const juizAtivo=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.juiz)||null;const[formData,setFormData]=useState({nome:'',tempo_servico:'',casos_julgados:'',avaliacao_media:0});const[imagemFile,setImagemFile]=useState(null);const[previewUrl,setPreviewUrl]=useState(null);useEffect(()=>{if(juizAtivo){setFormData(juizAtivo);if(juizAtivo.imagem){setPreviewUrl(`http://localhost:3001/uploads/${juizAtivo.imagem}`);}}},[juizAtivo]);const handleImagemChange=e=>{const file=e.target.files[0];if(file){setImagemFile(file);const fileUrl=URL.createObjectURL(file);setPreviewUrl(fileUrl);}};const handleSubmit=async e=>{e.preventDefault();try{const submitFormData=new FormData();// Adiciona todos os campos do formulário ao FormData\nObject.keys(formData).forEach(key=>{submitFormData.append(key,formData[key]);});// Adiciona a imagem apenas se uma nova imagem foi selecionada\nif(imagemFile){submitFormData.append('imagem',imagemFile);}if(juizAtivo){await axios.put(`http://localhost:3001/juiz/${juizAtivo.id_juiz}`,submitFormData,{headers:{'Content-Type':'multipart/form-data'}});}else{await axios.post('http://localhost:3001/juiz',submitFormData,{headers:{'Content-Type':'multipart/form-data'}});}navigate('/admin/dashboard/juiz');}catch(err){console.error('Erro ao salvar juiz:',err);}};const handleCancel=()=>{navigate('/admin/dashboard/juiz');};return/*#__PURE__*/_jsx(ContainerHome,{children:/*#__PURE__*/_jsx(\"section\",{className:styles.loginSection,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.loginContainer,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:juizAtivo?'Editar Juiz':'Novo Juiz'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.loginForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nome:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nome,onChange:e=>setFormData({...formData,nome:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tempo de Servi\\xE7o:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.tempo_servico,onChange:e=>setFormData({...formData,tempo_servico:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Casos Julgados:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.casos_julgados,onChange:e=>setFormData({...formData,casos_julgados:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Foto:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImagemChange}),previewUrl&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Preview\",style:{maxWidth:'200px',marginTop:'10px'}})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.submitButton,children:juizAtivo?'Salvar Alterações':'Criar Juiz'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:styles.submitButton,children:\"Cancelar\"})]})]})})});};export default AudienciasFormPageO;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","axios","styles","ContainerHome","jsx","_jsx","jsxs","_jsxs","AudienciasFormPageO","_location$state","navigate","location","juizAtivo","state","juiz","formData","setFormData","nome","tempo_servico","casos_julgados","avaliacao_media","imagemFile","setImagemFile","previewUrl","setPreviewUrl","imagem","handleImagemChange","e","file","target","files","fileUrl","URL","createObjectURL","handleSubmit","preventDefault","submitFormData","FormData","Object","keys","forEach","key","append","put","id_juiz","headers","post","err","console","error","handleCancel","children","className","loginSection","loginContainer","title","onSubmit","loginForm","formGroup","type","value","onChange","required","accept","src","alt","style","maxWidth","marginTop","submitButton","onClick"],"sources":["C:/Users/vinic/OneDrive/Área de Trabalho/React project/justix/src/components/BD/AudienciasFormPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport styles from '../../pages/Login/Login.module.css';\r\nimport ContainerHome from '../ContainerHome';\r\n\r\nconst AudienciasFormPageO = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const juizAtivo = location.state?.juiz || null;\r\n\r\n  const [formData, setFormData] = useState({\r\n    nome: '',\r\n    tempo_servico: '',\r\n    casos_julgados: '',\r\n    avaliacao_media: 0\r\n  });\r\n\r\n  const [imagemFile, setImagemFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    if (juizAtivo) {\r\n      setFormData(juizAtivo);\r\n      if (juizAtivo.imagem) {\r\n        setPreviewUrl(`http://localhost:3001/uploads/${juizAtivo.imagem}`);\r\n      }\r\n    }\r\n  }, [juizAtivo]);\r\n\r\n  const handleImagemChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImagemFile(file);\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setPreviewUrl(fileUrl);\r\n    }\r\n  };\r\n\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const submitFormData = new FormData();\r\n      \r\n      // Adiciona todos os campos do formulário ao FormData\r\n      Object.keys(formData).forEach(key => {\r\n        submitFormData.append(key, formData[key]);\r\n      });\r\n\r\n      // Adiciona a imagem apenas se uma nova imagem foi selecionada\r\n      if (imagemFile) {\r\n        submitFormData.append('imagem', imagemFile);\r\n      }\r\n\r\n      if (juizAtivo) {\r\n        await axios.put(\r\n          `http://localhost:3001/juiz/${juizAtivo.id_juiz}`,\r\n          submitFormData,\r\n          {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }\r\n        );\r\n      } else {\r\n        await axios.post(\r\n          'http://localhost:3001/juiz',\r\n          submitFormData,\r\n          {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }\r\n        );\r\n      }\r\n      navigate('/admin/dashboard/juiz');\r\n    } catch (err) {\r\n      console.error('Erro ao salvar juiz:', err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    navigate('/admin/dashboard/juiz');\r\n  };\r\n\r\n  return (\r\n    <ContainerHome>\r\n      <section className={styles.loginSection}>\r\n    <div className={styles.loginContainer}>\r\n      <h3 className={styles.title}>{juizAtivo ? 'Editar Juiz' : 'Novo Juiz'}</h3>\r\n      <form onSubmit={handleSubmit} className={styles.loginForm}>\r\n        <div className={styles.formGroup}>\r\n          <label>Nome:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.nome}\r\n            onChange={(e) => setFormData({ ...formData, nome: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Tempo de Serviço:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.tempo_servico}\r\n            onChange={(e) => setFormData({ ...formData, tempo_servico: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Casos Julgados:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.casos_julgados}\r\n            onChange={(e) => setFormData({ ...formData, casos_julgados: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <label>Foto:</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleImagemChange}\r\n          />\r\n          {previewUrl && (\r\n            <div>\r\n              <img \r\n                src={previewUrl} \r\n                alt=\"Preview\" \r\n                style={{ maxWidth: '200px', marginTop: '10px' }}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button type=\"submit\" className={styles.submitButton}>\r\n          {juizAtivo ? 'Salvar Alterações' : 'Criar Juiz'}\r\n        </button>\r\n        <button type=\"button\" onClick={handleCancel} className={styles.submitButton}>\r\n          Cancelar\r\n        </button>\r\n      </form>\r\n    </div>\r\n    </section>\r\n    </ContainerHome>\r\n  );\r\n};\r\n\r\nexport default AudienciasFormPageO;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}