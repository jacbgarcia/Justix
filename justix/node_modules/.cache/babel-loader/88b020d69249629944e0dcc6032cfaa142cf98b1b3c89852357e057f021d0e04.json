{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vinic\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\React project\\\\justix\\\\src\\\\components\\\\HeaderLggd\\\\index.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useAuth } from '../../contexts/AuthContext'; // Assumindo que você está usando o AuthContext\nimport styles from \"./HeaderLggd.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getRandomColor = () => {\n  const colors = ['rgb(37, 99, 235)',\n  // blue\n  'rgb(147, 51, 234)',\n  // purple\n  'rgb(22, 163, 74)',\n  // green\n  'rgb(220, 38, 38)',\n  // red\n  'rgb(79, 70, 229)',\n  // indigo\n  'rgb(236, 72, 153)',\n  // pink\n  'rgb(20, 184, 166)' // teal\n  ];\n  return colors[Math.floor(Math.random() * colors.length)];\n};\nfunction HeaderLggd({\n  children\n}) {\n  _s();\n  const {\n    logout: authLogout,\n    authFetch\n  } = useAuth();\n  const navigate = useNavigate();\n  const [isOpen, setIsOpen] = useState(false);\n  const popupRef = useRef(null);\n  const [user, setUser] = useState(null);\n  const [firstLetter, setFirstLetter] = useState('');\n  const [backgroundColor] = useState(getRandomColor());\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        // Pegar dados do usuário do localStorage\n        const authData = localStorage.getItem('usuarios');\n        if (!authData) {\n          console.log(\"Nenhum usuário autenticado\");\n          navigate('/login');\n          return;\n        }\n        const userData = JSON.parse(authData);\n\n        // Usar authFetch do AuthContext para fazer requisição autenticada\n        const response = await authFetch(`http://localhost:3001/usuarios/${userData.email}`);\n        if (response.ok) {\n          const userDetails = await response.json();\n          setUser(userDetails);\n          setFirstLetter(userDetails.nome.charAt(0).toUpperCase());\n        } else {\n          console.error('Erro ao buscar dados do usuário:', response.statusText);\n          if (response.status === 401) {\n            navigate('/login');\n          }\n        }\n      } catch (error) {\n        console.error('Erro ao buscar dados do usuário:', error);\n        navigate('/login');\n      }\n    };\n    fetchUserData();\n  }, [authFetch, navigate]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (popupRef.current && !popupRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  const handleLogout = async () => {\n    try {\n      await authLogout();\n      navigate('/login');\n    } catch (error) {\n      console.error('Erro ao fazer logout:', error);\n      // Mesmo com erro, redireciona para login\n      navigate('/login');\n    }\n  };\n\n  // Resto do código de estilos permanece o mesmo...\n\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: styles.navbar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.navleft,\n        ref: popupRef,\n        children: [user && /*#__PURE__*/_jsxDEV(\"button\", {\n          style: usuariosButtonStyle,\n          onClick: () => setIsOpen(!isOpen),\n          \"aria-label\": \"Menu do usu\\xE1rio\",\n          children: firstLetter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this), isOpen && user && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: popupStyle,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: popupLinkStyle,\n            className: \"text-gray-700\",\n            children: user.nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/perfil\",\n            style: popupLinkStyle,\n            className: \"hover:bg-gray-100\",\n            children: \"Dados do usu\\xE1rio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/pontuacao\",\n            style: popupLinkStyle,\n            className: \"hover:bg-gray-100\",\n            children: \"Pontua\\xE7\\xE3o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            style: logoutButtonStyle,\n            className: \"hover:bg-gray-200\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), children, /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.brand,\n        children: \"JUSTIX\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n}\n_s(HeaderLggd, \"0pfafjtRARl0f5ZKynwiZW1AyJ0=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = HeaderLggd;\nexport default HeaderLggd;\nvar _c;\n$RefreshReg$(_c, \"HeaderLggd\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","useAuth","styles","jsxDEV","_jsxDEV","getRandomColor","colors","Math","floor","random","length","HeaderLggd","children","_s","logout","authLogout","authFetch","navigate","isOpen","setIsOpen","popupRef","user","setUser","firstLetter","setFirstLetter","backgroundColor","fetchUserData","authData","localStorage","getItem","console","log","userData","JSON","parse","response","email","ok","userDetails","json","nome","charAt","toUpperCase","error","statusText","status","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleLogout","className","navbar","navleft","ref","style","usuariosButtonStyle","onClick","fileName","_jsxFileName","lineNumber","columnNumber","popupStyle","popupLinkStyle","to","logoutButtonStyle","brand","_c","$RefreshReg$"],"sources":["C:/Users/vinic/OneDrive/Área de Trabalho/React project/justix/src/components/HeaderLggd/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from '../../contexts/AuthContext'; // Assumindo que você está usando o AuthContext\r\nimport styles from \"./HeaderLggd.module.css\";\r\n\r\nconst getRandomColor = () => {\r\n    const colors = [\r\n        'rgb(37, 99, 235)', // blue\r\n        'rgb(147, 51, 234)', // purple\r\n        'rgb(22, 163, 74)', // green\r\n        'rgb(220, 38, 38)', // red\r\n        'rgb(79, 70, 229)', // indigo\r\n        'rgb(236, 72, 153)', // pink\r\n        'rgb(20, 184, 166)'  // teal\r\n    ];\r\n    return colors[Math.floor(Math.random() * colors.length)];\r\n};\r\n\r\nfunction HeaderLggd({children}) {\r\n    const { logout: authLogout, authFetch } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const popupRef = useRef(null);\r\n    const [user, setUser] = useState(null);\r\n    const [firstLetter, setFirstLetter] = useState('');\r\n    const [backgroundColor] = useState(getRandomColor());\r\n\r\n    useEffect(() => {\r\n        const fetchUserData = async () => {\r\n            try {\r\n                // Pegar dados do usuário do localStorage\r\n                const authData = localStorage.getItem('usuarios');\r\n                if (!authData) {\r\n                    console.log(\"Nenhum usuário autenticado\");\r\n                    navigate('/login');\r\n                    return;\r\n                }\r\n\r\n                const userData = JSON.parse(authData);\r\n                \r\n                // Usar authFetch do AuthContext para fazer requisição autenticada\r\n                const response = await authFetch(`http://localhost:3001/usuarios/${userData.email}`);\r\n                \r\n                if (response.ok) {\r\n                    const userDetails = await response.json();\r\n                    setUser(userDetails);\r\n                    setFirstLetter(userDetails.nome.charAt(0).toUpperCase());\r\n                } else {\r\n                    console.error('Erro ao buscar dados do usuário:', response.statusText);\r\n                    if (response.status === 401) {\r\n                        navigate('/login');\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error('Erro ao buscar dados do usuário:', error);\r\n                navigate('/login');\r\n            }\r\n        };\r\n\r\n        fetchUserData();\r\n    }, [authFetch, navigate]);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (popupRef.current && !popupRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await authLogout();\r\n            navigate('/login');\r\n        } catch (error) {\r\n            console.error('Erro ao fazer logout:', error);\r\n            // Mesmo com erro, redireciona para login\r\n            navigate('/login');\r\n        }\r\n    };\r\n\r\n    // Resto do código de estilos permanece o mesmo...\r\n\r\n    return (\r\n        <header>\r\n            <nav className={styles.navbar}>\r\n                <div className={styles.navleft} ref={popupRef}>\r\n                    {user && (\r\n                        <button\r\n                            style={usuariosButtonStyle}\r\n                            onClick={() => setIsOpen(!isOpen)}\r\n                            aria-label=\"Menu do usuário\"\r\n                        >\r\n                            {firstLetter}\r\n                        </button>\r\n                    )}\r\n\r\n                    {isOpen && user && (\r\n                        <div style={popupStyle}>\r\n                            <div style={popupLinkStyle} className=\"text-gray-700\">\r\n                                {user.nome}\r\n                            </div>\r\n                            <Link \r\n                                to=\"/perfil\" \r\n                                style={popupLinkStyle}\r\n                                className=\"hover:bg-gray-100\"\r\n                            >\r\n                                Dados do usuário\r\n                            </Link>\r\n                            <Link \r\n                                to=\"/pontuacao\" \r\n                                style={popupLinkStyle}\r\n                                className=\"hover:bg-gray-100\"\r\n                            >\r\n                                Pontuação\r\n                            </Link>\r\n                            <button\r\n                                onClick={handleLogout}\r\n                                style={logoutButtonStyle}\r\n                                className=\"hover:bg-gray-200\"\r\n                            >\r\n                                Logout\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {children}\r\n                <span className={styles.brand}>JUSTIX</span>\r\n            </nav>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default HeaderLggd;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}